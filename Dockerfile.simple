FROM node:20-alpine

WORKDIR /app

# 1) Dependencias de Node desde AIContentCreator/build-files/node
COPY AIContentCreator/build-files/node/package*.json ./
RUN npm install --production

# 2) Código del servidor (server.js, etc.)
COPY AIContentCreator/build-files/node/*.js ./

# 3) Archivos estáticos generados por prepare-build.sh
COPY AIContentCreator/build-files/vistas/ ./vistas/
COPY AIContentCreator/build-files/css/    ./css/
COPY AIContentCreator/build-files/js/     ./js/
COPY AIContentCreator/build-files/img/    ./img/

EXPOSE 3000

CMD ["node", "server.js"]
